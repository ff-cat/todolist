(this["webpackJsonptodolist-13"]=this["webpackJsonptodolist-13"]||[]).push([[0],{104:function(t,e,n){},134:function(t,e,n){"use strict";n.r(e);var a,r=n(0),c=n(28),s=n.n(c),i=(n(104),n(14)),o=n(185),u=n(183),l=n(30),d=l.c,O=l.b;!function(t){t.SET_APP_STATUS="SET_APP_STATUS",t.SET_APP_ERROR="SET_APP_ERROR",t.REMOVE_TASK="REMOVE_TASK",t.ADD_TASK="ADD_TASK",t.UPDATE_TASK="UPDATE_TASK",t.SET_TASKS="SET_TASKS",t.CHANGE_TASK_ENTITY_STATUS="CHANGE_TASK_ENTITY_STATUS",t.REMOVE_TODOLIST="REMOVE_TODOLIST",t.ADD_TODOLIST="ADD_TODOLIST",t.CHANGE_TODOLIST_TITLE="CHANGE_TODOLIST_TITLE",t.CHANGE_TODOLIST_FILTER="CHANGE_TODOLIST_FILTER",t.SET_TODOLISTS="SET_TODOLISTS",t.CHANGE_TODOLIST_ENTITY_STATUS="CHANGE_TODOLIST_ENTITY_STATUS"}(a||(a={}));var j,b=function(t){return{type:a.SET_APP_STATUS,payload:{status:t}}},p=function(t){return{type:a.SET_APP_ERROR,payload:{error:t}}},f=n(2),E=r.forwardRef((function(t,e){return Object(f.jsx)(u.a,Object(i.a)({elevation:6,ref:e,variant:"filled"},t))})),T=function(){var t=d((function(t){return t.app.error})),e=O(),n=function(t,n){"clickaway"!==n&&e(p(null))};return Object(f.jsx)(o.a,{open:!!t,autoHideDuration:6e3,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(f.jsx)(E,{onClose:n,severity:"error",sx:{width:"100%"},children:t})})},S=n(192),D=n(193),I=n(191),y=n(194),_=n(177);function h(){var t=d((function(t){return t.app.status}));return Object(f.jsxs)("header",{children:[Object(f.jsx)(T,{}),Object(f.jsx)(S.a,{position:"static",children:Object(f.jsx)(D.a,{style:{display:"flex",justifyContent:"space-between"},children:Object(f.jsx)(I.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(f.jsx)(_.a,{})})})}),t===j.PENDING&&Object(f.jsx)("div",{className:"app-linear",children:Object(f.jsx)(y.a,{})})]})}!function(t){t.IDLE="idle",t.PENDING="pending",t.SUCCEEDED="succeeded",t.FAILED="failed"}(j||(j={}));var v=n(190),C=n(186),x=n(188),A=n(12),m=n(181),N=n(189),k=n(179),L=Object(r.memo)((function(t){var e=t.onAddItem,n=t.entityStatus,a=Object(r.useState)(""),c=Object(A.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(null),u=Object(A.a)(o,2),l=u[0],d=u[1],O=function(){""!==s.trim()?(e(s),i("")):d("Title is required")};return Object(f.jsxs)("div",{children:[Object(f.jsx)(m.a,{disabled:n===j.PENDING,variant:"outlined",size:"small",label:"Title",value:s,error:!!l,helperText:l,onChange:function(t){i(t.currentTarget.value)},onKeyPress:function(t){null!==l&&d(null),13===t.charCode&&O()}}),Object(f.jsx)(N.a,{color:"primary",onClick:O,disabled:n===j.PENDING,children:Object(f.jsx)(k.a,{})})]})})),P=Object(r.memo)((function(t){var e=t.title,n=t.onUpdateTitle,a=t.entityStatus,c=Object(r.useState)(!1),s=Object(A.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(""),l=Object(A.a)(u,2),d=l[0],O=l[1];return i?Object(f.jsx)(m.a,{disabled:a===j.PENDING,size:"small",value:d,onChange:function(t){O(t.currentTarget.value)},onBlur:function(){o(!1),d!==e&&n(d)},autoFocus:!0,onKeyPress:function(t){13===t.charCode&&(o(!1),n(d))}}):Object(f.jsx)("span",{onDoubleClick:function(){a!==j.PENDING&&(o(!0),O(e))},children:e})})),U=n(180),G=n(184),g=n(20),w=n(32),R=n(90),K=n.n(R).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.1/",headers:{"API-KEY":"f272445b-402b-4b0f-ba99-09cb5a98a4e4"}}),H=function(t){return K.get("todo-lists/".concat(t,"/tasks"))},B=function(t,e){return K.delete("todo-lists/".concat(t,"/tasks/").concat(e)).then((function(t){return t.data}))},V=function(t,e){return K.post("todo-lists/".concat(t,"/tasks"),{title:e}).then((function(t){return t.data}))},M=function(t,e,n){return K.put("todo-lists/".concat(t,"/tasks/").concat(e),n).then((function(t){return t.data}))},Y=function(t,e){return{type:a.REMOVE_TASK,payload:{todolistId:t,taskId:e}}},z=function(t,e,n){return{type:a.UPDATE_TASK,payload:{todolistId:t,taskId:e,model:n}}},F=function(t,e){return{type:a.SET_TASKS,payload:{todolistId:t,tasks:e}}},J=function(t,e,n){return{type:a.CHANGE_TASK_ENTITY_STATUS,payload:{todolistId:t,taskId:e,status:n}}},q=function(t,e,n){return function(){var a=Object(w.a)(Object(g.a)().mark((function a(r,c){var s,o,u;return Object(g.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r(b(j.PENDING)),r(J(t,e,j.PENDING)),s=c().tasks[t].find((function(t){return t.id===e}))){a.next=5;break}return a.abrupt("return");case 5:return o=Object(i.a)({title:s.title,description:s.description,status:s.status,priority:s.priority,startDate:s.startDate,deadline:s.deadline},n),a.prev=6,a.next=9,M(t,e,o);case 9:0===(u=a.sent).resultCode?(r(z(t,e,o)),r(b(j.SUCCEEDED))):(r(p(u.messages[0])),r(b(j.SUCCEEDED))),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(6),r(p(a.t0.message)),r(b(j.SUCCEEDED));case 17:return a.prev=17,r(J(t,e,j.IDLE)),a.finish(17);case 20:case"end":return a.stop()}}),a,null,[[6,13,17,20]])})));return function(t,e){return a.apply(this,arguments)}}()},Q=Object(r.memo)((function(t){var e=t.todolistId,n=t.taskId,a=t.taskTitle,c=t.status,s=t.entityStatus,i=Object(l.b)();return Object(f.jsxs)("div",{className:c?"is-done":"",children:[Object(f.jsx)(G.a,{disabled:s===j.PENDING,color:"primary",checked:Boolean(c),onChange:Object(r.useCallback)((function(){i(q(e,n,{status:Number(!c)}))}),[i,e,n,c])}),Object(f.jsx)(P,{title:a,onUpdateTitle:Object(r.useCallback)((function(t){i(q(e,n,{title:t}))}),[i,e,n]),entityStatus:s}),Object(f.jsx)(I.a,{disabled:s===j.PENDING,onClick:Object(r.useCallback)((function(){i(function(t,e){return function(){var n=Object(w.a)(Object(g.a)().mark((function n(a){return Object(g.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(b(j.PENDING)),a(J(t,e,j.PENDING)),n.prev=2,n.next=5,B(t,e);case 5:0===n.sent.resultCode&&a(Y(t,e)),a(b(j.SUCCEEDED)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(2),a(p(n.t0.message)),a(b(j.SUCCEEDED));case 14:return n.prev=14,a(J(t,e,j.IDLE)),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,10,14,17]])})));return function(t){return n.apply(this,arguments)}}()}(e,n))}),[i,e,n]),children:Object(f.jsx)(U.a,{})})]},n)})),W=Object(r.memo)((function(t){var e=t.todolistId,n=t.filter,a=d((function(t){return t.tasks})),r=a[e];return"active"===n&&(r=a[e].filter((function(t){return!Boolean(t.status)}))),"completed"===n&&(r=a[e].filter((function(t){return Boolean(t.status)}))),Object(f.jsx)("div",{children:r.map((function(t){return Object(f.jsx)(Q,{todolistId:e,taskId:t.id,taskTitle:t.title,status:t.status,entityStatus:t.entityStatus},t.id)}))})})),X=function(){return K.get("todo-lists")},Z=function(t){return K.post("todo-lists",{title:t}).then((function(t){return t.data}))},$=function(t,e){return K.put("todo-lists/".concat(t),{title:e}).then((function(t){return t.data}))},tt=function(t){return K.delete("todo-lists/".concat(t)).then((function(t){return t.data}))},et=function(t){return{type:a.REMOVE_TODOLIST,payload:{todolistId:t}}},nt=function(t,e){return{type:a.ADD_TODOLIST,payload:{todolistId:t,title:e}}},at=function(t,e){return{type:a.CHANGE_TODOLIST_TITLE,payload:{todolistId:t,title:e}}},rt=function(t,e){return{type:a.CHANGE_TODOLIST_FILTER,payload:{todolistId:t,filter:e}}},ct=function(t,e){return{type:a.CHANGE_TODOLIST_ENTITY_STATUS,payload:{todolistId:t,status:e}}},st=n(91),it=n.n(st),ot=Object(r.memo)((function(t){var e=t.todolistId,n=t.todolistTitle,c=t.filter,s=t.entityStatus,i=Object(l.b)();return Object(r.useEffect)((function(){i(function(t){return function(){var e=Object(w.a)(Object(g.a)().mark((function e(n){var a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(b(j.PENDING)),e.next=3,H(t);case 3:200===(a=e.sent).status&&n(F(t,a.data.items)),n(b(j.SUCCEEDED));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:Object(f.jsxs)("h3",{children:[Object(f.jsx)(P,{title:n,onUpdateTitle:Object(r.useCallback)((function(t){i(function(t,e){return function(){var n=Object(w.a)(Object(g.a)().mark((function n(a){return Object(g.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(b(j.PENDING)),a(ct(t,j.PENDING)),n.prev=2,n.next=5,$(t,e);case 5:0===n.sent.resultCode&&a(at(t,e)),a(b(j.SUCCEEDED)),a(ct(t,j.IDLE)),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(2),a(p(n.t0.message)),a(b(j.SUCCEEDED)),a(ct(t,j.IDLE));case 16:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(t){return n.apply(this,arguments)}}()}(e,t))}),[i,e]),entityStatus:s}),Object(f.jsx)(I.a,{disabled:s===j.PENDING,onClick:Object(r.useCallback)((function(){i(function(t){return function(){var e=Object(w.a)(Object(g.a)().mark((function e(n){return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(b(j.PENDING)),n(ct(t,j.PENDING)),e.prev=2,e.next=5,tt(t);case 5:0===e.sent.resultCode&&n(et(t)),n(b(j.SUCCEEDED)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),n(p(e.t0.message)),n(b(j.SUCCEEDED)),n(ct(t,j.IDLE));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}(e))}),[i,e]),children:Object(f.jsx)(U.a,{})})]})}),Object(f.jsx)("div",{children:Object(f.jsx)(L,{onAddItem:Object(r.useCallback)((function(t){i(function(t,e){return function(){var n=Object(w.a)(Object(g.a)().mark((function n(r){var c;return Object(g.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(b(j.PENDING)),n.prev=1,n.next=4,V(t,e);case 4:0===(c=n.sent).resultCode?(r((s=c.data.item,{type:a.ADD_TASK,payload:{task:s}})),r(b(j.SUCCEEDED))):(r(p(c.messages[0])),r(b(j.SUCCEEDED))),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),r(p(n.t0.message)),r(b(j.SUCCEEDED));case 12:case"end":return n.stop()}var s}),n,null,[[1,8]])})));return function(t){return n.apply(this,arguments)}}()}(e,t))}),[i,e]),entityStatus:s})}),Object(f.jsx)("div",{children:Object(f.jsx)(W,{todolistId:e,filter:c})}),Object(f.jsxs)("div",{className:it.a.filterButtonBlock,children:[Object(f.jsx)(N.a,{onClick:Object(r.useCallback)((function(){i(rt(e,"all"))}),[i,e]),className:"all"===c?"active-filter":"",variant:"all"===c?"contained":"outlined",size:"small",color:"primary",children:"All"}),Object(f.jsx)(N.a,{onClick:Object(r.useCallback)((function(){i(rt(e,"active"))}),[i,e]),className:"active"===c?"active-filter":"",variant:"active"===c?"contained":"outlined",size:"small",color:"primary",children:"Active"}),Object(f.jsx)(N.a,{onClick:Object(r.useCallback)((function(){i(rt(e,"completed"))}),[i,e]),className:"completed"===c?"active-filter":"",variant:"completed"===c?"contained":"outlined",size:"small",color:"primary",children:"Completed"})]})]})})),ut=function(){var t=d((function(t){return t.todolists})),e=Object(l.b)(),n=Object(r.useCallback)((function(t){e(function(t){return function(){var e=Object(w.a)(Object(g.a)().mark((function e(n){var a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(b(j.PENDING)),e.prev=1,e.next=4,Z(t);case 4:0===(a=e.sent).resultCode?(n(nt(a.data.item.id,t)),n(b(j.SUCCEEDED))):(n(p(a.messages[0])),n(b(j.SUCCEEDED))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(p(e.t0.message)),n(b(j.SUCCEEDED));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}(t))}),[e]);return Object(r.useEffect)((function(){e(function(){var t=Object(w.a)(Object(g.a)().mark((function t(e){var n;return Object(g.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(b(j.PENDING)),t.next=3,X();case 3:200===(n=t.sent).status&&e((r=n.data,{type:a.SET_TODOLISTS,payload:{todolists:r}})),e(b(j.SUCCEEDED));case 6:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(f.jsxs)(v.a,{fixed:!0,children:[Object(f.jsx)(C.a,{container:!0,style:{padding:"20px"},children:Object(f.jsx)(L,{onAddItem:n})}),Object(f.jsx)(C.a,{container:!0,spacing:3,children:t.map((function(t){return Object(f.jsx)(C.a,{item:!0,children:Object(f.jsx)(x.a,{style:{padding:"10px"},children:Object(f.jsx)(ot,{todolistId:t.id,todolistTitle:t.title,filter:t.filter,entityStatus:t.entityStatus},t.id)})},t.id)}))})]})},lt=function(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(h,{}),Object(f.jsx)(ut,{})]})},dt=n(15),Ot=n(5),jt={},bt=[],pt=n(58),ft=n(92),Et={status:j.IDLE,error:null},Tt=Object(pt.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a.SET_TASKS:return Object(i.a)(Object(i.a)({},t),{},Object(Ot.a)({},e.payload.todolistId,e.payload.tasks.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{entityStatus:j.IDLE})}))));case a.REMOVE_TASK:return Object(i.a)(Object(i.a)({},t),{},Object(Ot.a)({},e.payload.todolistId,t[e.payload.todolistId].filter((function(t){return t.id!==e.payload.taskId}))));case a.ADD_TASK:return Object(i.a)(Object(i.a)({},t),{},Object(Ot.a)({},e.payload.task.todoListId,[Object(i.a)(Object(i.a)({},e.payload.task),{},{entityStatus:j.IDLE})].concat(Object(dt.a)(t[e.payload.task.todoListId]))));case a.UPDATE_TASK:return Object(i.a)(Object(i.a)({},t),{},Object(Ot.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(i.a)(Object(i.a)({},t),e.payload.model):t}))));case a.ADD_TODOLIST:return Object(i.a)(Object(Ot.a)({},e.payload.todolistId,[]),t);case a.REMOVE_TODOLIST:return delete t[e.payload.todolistId],Object(i.a)({},t);case a.SET_TODOLISTS:var n=Object(i.a)({},t);return e.payload.todolists.forEach((function(t){n[t.id]=[]})),n;case a.CHANGE_TASK_ENTITY_STATUS:return Object(i.a)(Object(i.a)({},t),{},Object(Ot.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(i.a)(Object(i.a)({},t),{},{entityStatus:e.payload.status}):t}))));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a.SET_TODOLISTS:return e.payload.todolists.map((function(t){return{addedDate:"",order:0,id:t.id,title:t.title,filter:"all",entityStatus:j.IDLE}}));case a.REMOVE_TODOLIST:return t.filter((function(t){return t.id!==e.payload.todolistId}));case a.ADD_TODOLIST:return[{addedDate:"",order:0,id:e.payload.todolistId,title:e.payload.title,filter:"all",entityStatus:j.IDLE}].concat(Object(dt.a)(t));case a.CHANGE_TODOLIST_TITLE:case a.CHANGE_TODOLIST_FILTER:return t.map((function(t){return t.id===e.payload.todolistId?Object(i.a)(Object(i.a)({},t),e.payload):t}));case a.CHANGE_TODOLIST_ENTITY_STATUS:return t.map((function(t){return t.id===e.payload.todolistId?Object(i.a)(Object(i.a)({},t),{},{entityStatus:e.payload.status}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a.SET_APP_STATUS:return Object(i.a)(Object(i.a)({},t),{},{status:e.payload.status});case a.SET_APP_ERROR:return Object(i.a)(Object(i.a)({},t),{},{error:e.payload.error});default:return t}}}),St=Object(pt.c)(Tt,Object(pt.a)(ft.a));window.store=St,s.a.render(Object(f.jsx)(l.a,{store:St,children:Object(f.jsx)(lt,{})}),document.getElementById("root"))},91:function(t,e,n){t.exports={filterButtonBlock:"Todolist_filterButtonBlock__37VKL"}}},[[134,1,2]]]);
//# sourceMappingURL=main.6704eed7.chunk.js.map