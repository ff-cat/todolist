(this["webpackJsonptodolist-13"]=this["webpackJsonptodolist-13"]||[]).push([[0],{115:function(t,e,n){t.exports={preloaderWrapper:"Preloader_preloaderWrapper__SkzFW",loader:"Preloader_loader__dPSfX",spin:"Preloader_spin__27s3B"}},195:function(t,e,n){},196:function(t,e,n){},326:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(20),o=n.n(c);n(195),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(196);var i,s=n(364),l=n(365),u=n(358),d=n(361),j=n(367),O=n(366),b=n(24),p=b.d,f=(b.c,n(149)),m=n(150),h=n(38),T=n.n(h),x=function(t){return t?void 0:"Field is required"},v=n(14),S=n(3),_=n(93),I=n.n(_),y=n(2),k=["input","meta","child"],A=["input","meta","child"],E=function(t){t.input;var e=t.meta,n=(t.child,Object(S.a)(t,k)),a=e.touched&&e.error;return Object(y.jsxs)("div",{className:"".concat(I.a.formControl," ").concat(a?I.a.error:""),children:[Object(y.jsx)("div",{children:n.children}),a&&Object(y.jsx)("span",{children:e.error})]})},g=function(t){var e=t.input,n=(t.meta,t.child,Object(S.a)(t,A));return Object(y.jsx)(E,Object(v.a)(Object(v.a)({},t),{},{children:Object(y.jsx)("input",Object(v.a)(Object(v.a)({className:I.a.input},e),n))}))},C=Object(m.a)({form:"login"})((function(t){return Object(y.jsx)("div",{className:T.a.LoginReduxForm,children:Object(y.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(y.jsx)("div",{className:T.a.email,children:Object(y.jsx)(f.a,{component:g,placeholder:"Email",name:"email",validate:[x]})}),Object(y.jsx)("div",{className:T.a.password,children:Object(y.jsx)(f.a,{component:g,placeholder:"Password",name:"password",type:"password",validate:[x]})}),Object(y.jsxs)("div",{className:T.a.remember,children:[Object(y.jsx)(f.a,{component:g,type:"checkbox",name:"rememberMe"})," remember me"]}),t.error&&Object(y.jsx)("div",{className:T.a.formError,children:t.error}),Object(y.jsx)("div",{className:T.a.loginButton,children:Object(y.jsx)("button",{children:"Sign in"})})]})})})),D=n(9),w=n(17),L=n(86);!function(t){t.SET_USER_DATA="SET_USER_DATA",t.INITIALIZATION_SUCCESS="INITIALIZATION_SUCCESS",t.SET_APP_STATUS="SET_APP_STATUS",t.REMOVE_TASK="REMOVE_TASK",t.ADD_TASK="ADD_TASK",t.UPDATE_TASK="UPDATE_TASK",t.SET_TASKS="SET_TASKS",t.REMOVE_TODOLIST="REMOVE_TODOLIST",t.ADD_TODOLIST="ADD_TODOLIST",t.CHANGE_TODOLIST_TITLE="CHANGE_TODOLIST_TITLE",t.CHANGE_TODOLIST_FILTER="CHANGE_TODOLIST_FILTER",t.SET_TODOLISTS="SET_TODOLISTS"}(i||(i={}));var N=n(60),P=n.n(N),K="f582c58f-0778-4c75-866b-da832054adf0",R=P.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.1/",headers:{"API-KEY":K}}),U=function(){return R.get("auth/me").then((function(t){return t.data}))},F=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return R.post("auth/login",{email:t,password:e,rememberMe:n}).then((function(t){return t.data}))},M=function(){return R.delete("auth/login").then((function(t){return t.data}))},B=function(t,e){return{type:i.SET_USER_DATA,payload:{data:t,isAuth:e}}},z=function(){return function(){var t=Object(w.a)(Object(D.a)().mark((function t(e){var n;return Object(D.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U();case 2:n=t.sent,e({type:i.INITIALIZATION_SUCCESS}),0===n.resultCode&&e(B(n.data,!0));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},H=function(){var t=Object(b.c)();return Object(y.jsxs)("div",{className:T.a.loginBlock,children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("span",{children:"email:"})," fatflycat@gmail.com",Object(y.jsxs)("p",{children:[Object(y.jsx)("span",{children:"password:"})," qwe123qwe"]})]}),Object(y.jsx)("h1",{children:"Sign In"}),Object(y.jsx)(C,{onSubmit:function(e){t(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(w.a)(Object(D.a)().mark((function a(r){var c;return Object(D.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,F(t,e,n);case 2:if(0!==(c=a.sent).resultCode){a.next=8;break}return a.next=6,r(z());case 6:a.next=9;break;case 8:r(Object(L.a)("login",{_error:c.messages}));case 9:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()}(e.email,e.password,e.rememberMe))}})]})},V=function(){return Object(y.jsx)(H,{})},G=n(8),W=n(363),q=n(362),J=n(13),Y=n(368),Z=n(359),Q=r.a.memo((function(t){var e=t.addItemCallback,n=Object(a.useState)(""),r=Object(J.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(null),s=Object(J.a)(i,2),l=s[0],d=s[1],j=function(){""!==c.trim()?(e(c),o("")):d("Title is required")};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Y.a,{variant:"outlined",size:"small",label:"Title",value:c,error:!!l,helperText:l,onChange:function(t){o(t.currentTarget.value)},onKeyPress:function(t){null!==l&&d(null),13===t.charCode&&j()}}),Object(y.jsx)(u.a,{color:"primary",onClick:j,children:Object(y.jsx)(Z.a,{})})]})})),X=P.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.1/",headers:{"API-KEY":K}}),$=function(){return X.get("todo-lists")},tt=function(t){return X.post("todo-lists",{title:t})},et=function(t,e){return X.put("todo-lists/".concat(t),{title:e})},nt=function(t){return X.delete("todo-lists/".concat(t))},at=function(t){return{type:i.SET_APP_STATUS,payload:{status:t}}},rt=function(t){return{type:i.REMOVE_TODOLIST,payload:{todolistId:t}}},ct=function(t,e){return{type:i.ADD_TODOLIST,payload:{todolistId:t,title:e}}},ot=function(t,e){return{type:i.CHANGE_TODOLIST_TITLE,payload:{todolistId:t,title:e}}},it=function(t,e){return{type:i.CHANGE_TODOLIST_FILTER,payload:{todolistId:t,filter:e}}},st=n(327),lt=r.a.memo((function(t){var e=t.title,n=t.updateTitleCallback,r=Object(a.useState)(!1),c=Object(J.a)(r,2),o=c[0],i=c[1],s=Object(a.useState)(""),l=Object(J.a)(s,2),u=l[0],d=l[1];return o?Object(y.jsx)(Y.a,{size:"small",value:u,onChange:function(t){d(t.currentTarget.value)},onBlur:function(){i(!1),u!==e&&n(u)},autoFocus:!0,onKeyPress:function(t){13===t.charCode&&(i(!1),n(u))}}):Object(y.jsx)("span",{onDoubleClick:function(){i(!0),d(e)},children:e})})),ut=n(360),dt=n(369),jt=P.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.1/",headers:{"API-KEY":K}}),Ot=function(t){return jt.get("todo-lists/".concat(t,"/tasks"))},bt=function(t,e){return jt.delete("todo-lists/".concat(t,"/tasks/").concat(e))},pt=function(t,e){return jt.post("todo-lists/".concat(t,"/tasks"),{title:e})},ft=function(t,e,n){return jt.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},mt=function(t,e){return{type:i.REMOVE_TASK,payload:{todolistId:t,taskId:e}}},ht=function(t,e,n){return{type:i.UPDATE_TASK,payload:{todolistId:t,taskId:e,model:n}}},Tt=function(t,e){return{type:i.SET_TASKS,payload:{todolistId:t,tasks:e}}},xt=function(t,e,n){return function(){var a=Object(w.a)(Object(D.a)().mark((function a(r,c){var o,i;return Object(D.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r(at("loading")),o=c().tasks[t].find((function(t){return t.id===e}))){a.next=4;break}return a.abrupt("return");case 4:return i=Object(v.a)({title:o.title,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},n),a.next=7,ft(t,e,i);case 7:200===a.sent.status&&r(ht(t,e,i)),r(at("succeeded"));case 10:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}()},vt=r.a.memo((function(t){var e=t.todolistId,n=t.taskId,r=t.taskTitle,c=t.status,o=Object(b.c)();return Object(y.jsxs)("div",{className:c?"is-done":"",children:[Object(y.jsx)(dt.a,{color:"primary",checked:Boolean(c),onChange:Object(a.useCallback)((function(){o(xt(e,n,{status:Number(!Boolean(c))}))}),[o,e,n,c])}),Object(y.jsx)(lt,{title:r,updateTitleCallback:Object(a.useCallback)((function(t){o(xt(e,n,{title:t}))}),[o,e,n])}),Object(y.jsx)(u.a,{onClick:Object(a.useCallback)((function(){o(function(t,e){return function(){var n=Object(w.a)(Object(D.a)().mark((function n(a){return Object(D.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(at("loading")),n.next=3,bt(t,e);case 3:200===n.sent.status&&a(mt(t,e)),a(at("succeeded"));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(e,n))}),[o,e,n]),children:Object(y.jsx)(ut.a,{})})]},n)})),St=r.a.memo((function(t){var e=t.todolistId,n=t.filter,a=p((function(t){return t.tasks})),r=a[e];return"active"===n&&(r=a[e].filter((function(t){return!Boolean(t.status)}))),"completed"===n&&(r=a[e].filter((function(t){return Boolean(t.status)}))),Object(y.jsx)("div",{children:r.map((function(t){return Object(y.jsx)(vt,{todolistId:e,taskId:t.id,taskTitle:t.title,status:t.status},t.id)}))})})),_t=r.a.memo((function(t){var e=t.todolistId,n=t.todolistTitle,r=t.filter,c=Object(b.c)();return Object(a.useEffect)((function(){c(function(t){return function(){var e=Object(w.a)(Object(D.a)().mark((function e(n){var a;return Object(D.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(at("loading")),e.next=3,Ot(t);case 3:200===(a=e.sent).status&&n(Tt(t,a.data.items)),n(at("succeeded"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e))}),[]),Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[Object(y.jsx)(lt,{title:n,updateTitleCallback:Object(a.useCallback)((function(t){c(function(t,e){return function(){var n=Object(w.a)(Object(D.a)().mark((function n(a){return Object(D.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(at("loading")),n.next=3,et(t,e);case 3:200===n.sent.status&&a(ot(t,e)),a(at("succeeded"));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(e,t))}),[c,e])}),Object(y.jsx)(u.a,{onClick:Object(a.useCallback)((function(){c(function(t){return function(){var e=Object(w.a)(Object(D.a)().mark((function e(n){return Object(D.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(at("loading")),e.next=3,nt(t);case 3:200===e.sent.status&&n(rt(t)),n(at("succeeded"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e))}),[c,e]),children:Object(y.jsx)(ut.a,{})})]})}),Object(y.jsx)("div",{children:Object(y.jsx)(Q,{addItemCallback:Object(a.useCallback)((function(t){c(function(t,e){return function(){var n=Object(w.a)(Object(D.a)().mark((function n(a){var r;return Object(D.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(at("loading")),n.next=3,pt(t,e);case 3:200===(r=n.sent).status&&a((c=r.data.data.item,{type:i.ADD_TASK,payload:{task:c}})),a(at("succeeded"));case 6:case"end":return n.stop()}var c}),n)})));return function(t){return n.apply(this,arguments)}}()}(e,t))}),[c,e])})}),Object(y.jsx)("div",{children:Object(y.jsx)(St,{todolistId:e,filter:r})}),Object(y.jsxs)("div",{children:[Object(y.jsx)(d.a,{onClick:Object(a.useCallback)((function(){c(it(e,"all"))}),[c,e]),className:"all"===r?"active-filter":"",variant:"all"===r?"contained":"outlined",size:"small",color:"primary",children:"All"}),Object(y.jsx)(d.a,{onClick:Object(a.useCallback)((function(){c(it(e,"active"))}),[c,e]),className:"active"===r?"active-filter":"",variant:"active"===r?"contained":"outlined",size:"small",color:"primary",children:"Active"}),Object(y.jsx)(d.a,{onClick:Object(a.useCallback)((function(){c(it(e,"completed"))}),[c,e]),className:"completed"===r?"active-filter":"",variant:"completed"===r?"contained":"outlined",size:"small",color:"primary",children:"Completed"})]})]})})})),It=r.a.memo((function(){var t=p((function(t){return t.todolists})),e=Object(b.c)();return Object(a.useEffect)((function(){e(function(){var t=Object(w.a)(Object(D.a)().mark((function t(e){var n;return Object(D.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(at("loading")),t.next=3,$();case 3:200===(n=t.sent).status&&e((a=n.data,{type:i.SET_TODOLISTS,payload:{todolists:a}})),e(at("succeeded"));case 6:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(y.jsx)(q.a,{container:!0,spacing:3,children:t.map((function(t){return Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(st.a,{style:{padding:"10px"},children:Object(y.jsx)(_t,{todolistId:t.id,todolistTitle:t.title,filter:t.filter},t.id)})},t.id)}))})})),yt=function(){var t=p((function(t){return t.auth})).isAuth,e=Object(b.c)(),n=Object(a.useCallback)((function(t){e(function(t){return function(){var e=Object(w.a)(Object(D.a)().mark((function e(n){var a;return Object(D.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(at("loading")),e.next=3,tt(t);case 3:200===(a=e.sent).status&&n(ct(a.data.data.item.id,t)),n(at("succeeded"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t))}),[e]);return t?Object(y.jsxs)(W.a,{fixed:!0,children:[Object(y.jsx)(q.a,{container:!0,style:{padding:"20px"},children:Object(y.jsx)(Q,{addItemCallback:n})}),Object(y.jsx)(It,{})]}):Object(y.jsx)(G.a,{to:"/login",replace:!0})},kt=n(115),At=n.n(kt),Et=function(){return Object(y.jsx)("div",{className:At.a.preloaderWrapper,children:Object(y.jsx)("div",{className:At.a.loader})})},gt=function(){var t=p((function(t){return t.app})).status,e=p((function(t){return t.auth})),n=e.isAuth,r=e.initializationSuccess,c=Object(b.c)();return Object(a.useEffect)((function(){c(z())}),[]),r?Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(s.a,{position:"static",children:Object(y.jsxs)(l.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(y.jsx)(u.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(y.jsx)(O.a,{})}),n?Object(y.jsx)(d.a,{onClick:function(){c(function(){var t=Object(w.a)(Object(D.a)().mark((function t(e){return Object(D.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M();case 2:0===t.sent.resultCode&&e(B({id:null,email:null,login:null},!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},color:"inherit",children:"Logout"}):Object(y.jsx)(d.a,{onClick:function(){},color:"inherit",children:"Login"})]})}),"loading"===t&&Object(y.jsx)(j.a,{}),Object(y.jsxs)(G.d,{children:[Object(y.jsx)(G.b,{path:"/",element:n?Object(y.jsx)(yt,{}):Object(y.jsx)(G.a,{to:"/login",replace:!0})}),Object(y.jsx)(G.b,{path:"/login",element:n?Object(y.jsx)(G.a,{to:"/todo",replace:!0}):Object(y.jsx)(V,{})}),Object(y.jsx)(G.b,{path:"/todo",element:Object(y.jsx)(yt,{})})]})]}):Object(y.jsx)(Et,{})},Ct=n(22),Dt=n(12),wt={},Lt=[],Nt=n(25),Pt=n(157),Kt={status:"idle"},Rt={id:null,email:null,login:null,isAuth:!1,initializationSuccess:!1},Ut=n(151),Ft=Object(Nt.c)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i.SET_TASKS:return Object(v.a)(Object(v.a)({},t),{},Object(Dt.a)({},e.payload.todolistId,e.payload.tasks.map((function(t){return Object(v.a)({},t)}))));case i.REMOVE_TASK:return Object(v.a)(Object(v.a)({},t),{},Object(Dt.a)({},e.payload.todolistId,t[e.payload.todolistId].filter((function(t){return t.id!==e.payload.taskId}))));case i.ADD_TASK:return Object(v.a)(Object(v.a)({},t),{},Object(Dt.a)({},e.payload.task.todoListId,[Object(v.a)({},e.payload.task)].concat(Object(Ct.a)(t[e.payload.task.todoListId]))));case i.UPDATE_TASK:return Object(v.a)(Object(v.a)({},t),{},Object(Dt.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(v.a)(Object(v.a)({},t),e.payload.model):t}))));case i.ADD_TODOLIST:return Object(v.a)(Object(Dt.a)({},e.payload.todolistId,[]),t);case i.REMOVE_TODOLIST:return delete t[e.payload.todolistId],Object(v.a)({},t);case i.SET_TODOLISTS:var n=Object(v.a)({},t);return e.payload.todolists.forEach((function(t){n[t.id]=[]})),n;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i.REMOVE_TODOLIST:return t.filter((function(t){return t.id!==e.payload.todolistId}));case i.ADD_TODOLIST:return[{addedDate:"",order:0,id:e.payload.todolistId,title:e.payload.title,filter:"all"}].concat(Object(Ct.a)(t));case i.CHANGE_TODOLIST_TITLE:return t.map((function(t){return t.id===e.payload.todolistId?Object(v.a)(Object(v.a)({},t),{},{title:e.payload.title}):t}));case i.CHANGE_TODOLIST_FILTER:return t.map((function(t){return t.id===e.payload.todolistId?Object(v.a)(Object(v.a)({},t),{},{filter:e.payload.filter}):t}));case i.SET_TODOLISTS:return e.payload.todolists.map((function(t){return{addedDate:"",order:0,id:t.id,title:t.title,filter:"all"}}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,e=arguments.length>1?arguments[1]:void 0;return e.type===i.SET_APP_STATUS?Object(v.a)(Object(v.a)({},t),{},{status:e.payload.status}):t},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i.SET_USER_DATA:return Object(v.a)(Object(v.a)(Object(v.a)({},t),e.payload.data),{},{isAuth:e.payload.isAuth});case i.INITIALIZATION_SUCCESS:return Object(v.a)(Object(v.a)({},t),{},{initializationSuccess:!0});default:return t}},form:Ut.a}),Mt=Object(Nt.d)(Ft,Object(Nt.a)(Pt.a));window.store=Mt;var Bt=n(87);o.a.render(Object(y.jsx)(Bt.a,{basename:"/todolist",children:Object(y.jsx)(b.a,{store:Mt,children:Object(y.jsx)(gt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},38:function(t,e,n){t.exports={loginBlock:"LoginForm_loginBlock__10k3k",email:"LoginForm_email__vCrjK",password:"LoginForm_password__MIeY2",remember:"LoginForm_remember__2bMQ7",loginButton:"LoginForm_loginButton__uSWb2",formError:"LoginForm_formError__1Jki3"}},93:function(t,e,n){t.exports={formControl:"FormsControls_formControl__2AHp3",error:"FormsControls_error__2CJ0P",input:"FormsControls_input__3Mvap"}}},[[326,1,2]]]);
//# sourceMappingURL=main.36757de2.chunk.js.map